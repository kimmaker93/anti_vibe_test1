**\[PRD\] Project AlterEgo: The Glass Box Agent (v2.0)**

| 문서 정보     | 내용                                                             |
| :-------- | :------------------------------------------------------------- |
| **제품명**   | **GLASSY**                                                     |
| **제작 단계** | **Prototype (Front-end 개발, Back-end 미구현**                      |
| **제품 유형** | 범용 챗봇 (ex. ChatGTP, Gemini, Claude, Notebook LM)              |

### **제작 주의 사항**
1. 제품 레이아웃 및 컴포넌트의 구성 요소 디자인은 Google의 Notebook lm을 최대한 벤치마크 합니다.
2. 문서 끝에 제시된 시나리오가 구동될 수 있는 수준에서만 개발
3. 시나리오가 유연하게 동작할 수 있도록 더미데이터 준비
## ---

**1\. 개발 목적 (Product Objectives)**

본 프로젝트는 AI의 '기억 상실'과 '블랙박스(불투명성)' 문제를 해결하기 위해, AI의 사고 과정(CoT)과 기억(Memory)을 시각화하고 사용자가 개입(Intervention)할 수 있는 인터페이스를 구축하는 것입니다.

### **1.1. 사용자 관점 (User Perspective): "신뢰와 통제"**

* **Why (문제):** 사용자는 AI가 내 데이터를 어떻게 기억하는지, 왜 이런 답변을 내놓았는지 알 수 없어 업무에 100% 신뢰하지 못함.

* **Goal (목표):**  
  1. **See (시각화):** AI가 지금 '어떤 기억'을 참고했는지, '어떤 단계'를 생각 중인지 눈으로 확인한다.  
  2. **Control (통제):** AI의 생각이 틀렸다면 중간에 개입하여 방향을 수정하거나, 잘못된 기억을 삭제한다.

### **1.2. 기획자/비즈니스 관점 (Business Perspective): "락인(Lock-in)과 데이터 선순환"**

* **Why (문제):** 단순 일회성 대화 모델은 경쟁 장벽이 낮음. 사용자만의 고유한 워크플로우와 맥락이 쌓여야 함.  
* **Goal (목표):**  
  1. **Context Assetization:** 사용자의 수정 행위(Human-in-the-loop) 자체가 AI의 성능을 높이는 데이터로 축적되는 선순환 구조 구축.  
  2. **Tech Showcase:** LangGraph, RAG 등 백엔드 기술력을 UI로 노출하여 '똑똑한 파트너'라는 브랜드 이미지 확립.

## ---

**2\. 핵심 UX 철학: "The Glass Box"**

💡 CPO Note:  
우리 제품의 핵심은 \*\*'불확실성의 시각화'\*\*입니다. AI가 100% 완벽한 척하는 것이 아니라, "이 부분은 확신할 수 없습니다"라고 솔직하게 드러낼 때(Confidence Indicator), 사용자는 오히려 신뢰를 느낍니다.

* **Zone 1 (Context Rail):** 프로젝트별 맥락 격리 (Local vs Global Memory).  
* **Zone 2 (Active Workspace):** 대화 및 Agent 실행 과정의 시각화.  
* **Zone 3 (Memory Attribution):** 실시간 기억 참조 및 수정 패널.

## ---

**3\. 상세 기능 요구사항 (Detailed Functional Requirements)**

개발 및 디자인 팀은 아래 기능을 통해 **LLM의 추론 능력과 에이전트의 자율성을 시각적 컴포넌트로 구현**해야 합니다.

### **3.1. \[Tech: CoT & Uncertainty\] 투명한 추론 과정 시각화**

단순 텍스트 응답 이전에 AI의 '내적 독백(Internal Monologue)'을 노출하여 환각(Hallucination)에 대한 면역력을 높입니다.

* **FUNC-01: Thought Process Accordion (사고의 연쇄 UI)**  
  * **Logic:** LLM이 답변 생성 전 수행하는 Chain of Thought 로그를 파싱.  
  * **UI:** 답변 상단에 '🤔 생각하는 중...' 상태 바 표시. 클릭 시 아코디언이 펼쳐지며 내부 추론 단계 노출.  
  * **Detail:**  
    * "사용자 의도 분석 중..." → "관련 기억 검색 중 (ID: \#213)..." → "답변 작성 중"  
    * 각 단계는 실시간 스트리밍으로 렌더링되어야 함(TTFT 체감 시간 단축). 5

* **FUNC-02: Confidence Score & Indicator (신뢰도 지표)**  
  * **Logic:** LLM이 생성한 답변의 사실 여부에 대한 자체 신뢰도(Logprobs 기반 등) 측정.  
  * **UI:** 답변 하단 또는 옆에 \[신뢰도: 높음/중간/낮음\] 뱃지 표시.  
  * **Detail:** 신뢰도가 '낮음'일 경우, 텍스트 색상을 흐리게 하거나 "확실하지 않으므로 확인이 필요합니다"라는 경고 툴팁 제공. 6

### **3.2. \[Tech: LangGraph\] 워크플로우 실행 상태 시각화**

단답형 대화가 아닌, 복잡한 과업(Plan \-\> Execute)을 수행하는 \*\*에이전트(Agentic UX)\*\*임을 보여줍니다.

* **FUNC-03: Dynamic Plan Builder (동적 계획 수립기)**  
  * **Logic:** 사용자의 복잡한 요청(예: "이번 주 트렌드 조사해서 보고서 써줘") 시, Planner Agent가 수립한 태스크 리스트를 수신.  
  * **UI:** 채팅창 내에 체크박스 리스트 형태의 **'실행 계획 카드'** 렌더링.  
  * **Interaction:**  
    * AI: 계획 제안 ("1. 웹 검색, 2\. 요약, 3\. 초안 작성, 4\. 이메일 발송")  
    * User: 특정 단계 삭제하거나 순서 변경 가능 (Human Intervention).  
* **FUNC-04: Tool Usage Badge (도구 사용 명시)**  
  * **Logic:** Agent가 Web Search Tool, Code Interpreter 등을 호출할 때의 이벤트 트리거.  
  * **UI:** 메시지 버블 내에 \[🌐 검색 중: "2025 AI 트렌드"\] 또는 \[🐍 코드 실행 중\] 칩을 실시간으로 표시.

### **3.3. \[Tech: RAG & Vector Store\] 메모리 시각화 및 편집 (Memory Glass Box)**

RAG(검색 증강 생성) 과정을 사용자가 직접 눈으로 보고 제어합니다.

* **FUNC-05: Real-time Memory Citation (실시간 기억 인용)**  
  * **Logic:** 답변 생성 시 참조한 Vector Chunk ID를 메타데이터로 수신.  
  * **UI:** 답변 텍스트 내에 각주(\[1\], \[기억\]) 형태로 표시하고, 클릭 시 우측 사이드바(Zone 3)의 해당 기억 카드로 하이라이트/스크롤 이동.  
* **FUNC-06: Mutable Memory Cards (수정 가능한 기억 카드)**  
  * **Logic:** Vector DB에 저장된 내용을 사람이 읽을 수 있는 요약본으로 변환하여 표시.  
  * **UI:** 우측 패널에 카드 리스트 형태로 나열.  
  * **Interaction:**  
    * **Edit:** 내용 수정 후 저장 시 즉시 임베딩 다시 수행(Upsert).  
    * **Delete/Forget:** "이 기억 잊어버리기" 버튼 클릭 시 Soft Delete 처리 및 향후 검색 제외.  
* **FUNC-07: Context Scope Toggle (기억 범위 설정)**  
  * **Logic:** 프로젝트별 Namespace 분리.  
  * **UI:** 상단 헤더 또는 사이드바에서 Global Memory(내 성향, 말투)와 Local Memory(현재 프로젝트 규칙)의 적용 여부를 토글 스위치로 제어.

### **3.4. \[Tech: Router\] 페르소나 및 모드 전환**

* **FUNC-08: Adaptive Persona Chip (적응형 페르소나)**  
  * **Logic:** Semantic Router가 사용자 발화 의도를 분석하여 모드(Coding, Writing, Brainstorming) 결정.  
  * **UI:** 상단 헤더에 현재 활성화된 페르소나(예: 👨‍💻 Senior Developer) 칩 표시.  
  * **Detail:** 모드 변경 시 은은한 배경색 변화나 애니메이션으로 '뇌가 바뀌었음'을 시각적으로 알림.

# 구현 되야 하는 시나리오 리스트
### **Category A. 사고 과정과 신뢰의 시각화 (CoT & Trust)**

> **UX 목표:** AI가 "왜" 이런 답을 했는지 보여주고, 맹목적인 믿음을 방지합니다.

#### **Case 1. 개발자 코드 리뷰 (Developer)**

- **Goal:** 코드를 붙여넣고 잠재적 오류를 확인하고 싶음.
    
- **UX Flow:**
    
    1. **[Action]** 사용자가 채팅창에 코드 블록을 포함하여 전송.
        
    2. **[System]** 답변 영역 상단에 **'🤔 생각하는 중...'** 상태 바 생성 (3초간 대기).
        
    3. **[Action]** 사용자가 '생각하는 중...' 바를 클릭.
        
    4. **[Visual]** `ThoughtAccordion`이 부드럽게 펼쳐짐(Slide Down). 내부에서 "코드 파싱 중...", "메모리 누수 확인 중..." 로그가 타자기처럼 찍힘.
        
    5. **[Visual]** 답변 완료 후 하단에 **[신뢰도: 높음 🟢]** 뱃지 표시.
        

#### **Case 2. 대학원생 논문 리뷰 (Researcher)**

- **Goal:** 논문의 한계점을 비판적으로 보고 싶음.
    
- **UX Flow:**
    
    1. **[Action]** 사용자가 "이 논문 방법론 비판해줘" 입력.
        
    2. **[Visual]** AI가 비판적인 어조로 답변 생성. 하단에 **[신뢰도: 중간 🟡]** 뱃지 표시.
        
    3. **[Action]** 사용자가 '중간' 뱃지에 마우스 오버(Hover).
        
    4. **[Visual]** 툴팁(Tooltip) 팝업: _"원본 데이터셋에 접근할 수 없어 추론이 포함되었습니다."_ (투명성 제공).
        

---

### **Category B. 실행 계획의 제어 (Workflow Control)**

> **UX 목표:** AI가 멋대로 일하지 않게, 사용자가 계획을 검토하고 수정합니다.

#### **Case 3. 마케터 트렌드 리서치 (Business)**

- **Goal:** 2025년 트렌드를 빠르게 파악하고 싶음.
    
- **UX Flow:**
    
    1. **[System]** 텍스트 답변 대신 **[실행 계획 카드]**가 먼저 등장. (체크박스 3개: 검색 -> 요약 -> 작성)
        
    2. **[Action]** 사용자가 카드 하단 **[▶️ 이대로 진행]** 버튼 클릭.
        
    3. **[Visual]** 카드 하단에 **[🌐 웹 검색 중...]** 뱃지가 깜빡임. 동시에 체크박스가 위에서부터 차례로 체크(✓)됨.
        

#### **Case 4. PM 경쟁사 리서치 (Business)**

- **Goal:** AI가 짠 계획에 내가 원하는 항목(가격 비교)을 추가하고 싶음.
    
- **UX Flow:**
    
    1. **[System]** AI가 2단계 계획 제안. (기능 분석 -> 장단점)
        
    2. **[Action]** 사용자가 **[+ 단계 추가]** 버튼 클릭 → 인풋창에 "가격 정책 비교" 입력 후 엔터.
        
    3. **[Visual]** 리스트 마지막에 3번 항목 생성됨.
        
    4. **[Action]** 사용자가 **[▶️ 진행]** 클릭하여 실행.
        

#### **Case 9. 워크플로우 논리 수정 (Business) [NEW]**

- **Goal:** 계획의 내용 자체를 수정하고 순서를 바꾸고 싶음.
    
- **UX Flow:**
    
    1. **[Action]** 사용자가 계획 카드의 **[✏️ 편집 모드]** 아이콘 클릭.
        
    2. **[Visual]** 카드가 **[Edit Mode]**로 전환됨. (텍스트 → Input Field, 체크박스 → Drag Handle ≡).
        
    3. **[Action]** 1번 단계 텍스트 수정("공식 홈피" → "커뮤니티 포함") & 2번 단계를 드래그하여 순서 변경.
        
    4. **[Action]** **[적용 및 실행]** 버튼 클릭.
        
    5. **[Visual]** 아코디언이 열리며 _"수정된 계획(커뮤니티 포함)에 따라 다시 계획을 수립합니다..."_ 로그 출력.
        

---

### **Category C. 기억과 페르소나의 관리 (Memory & Persona)**

> **UX 목표:** AI의 뇌(기억/성격)를 사용자가 직접 튜닝합니다.

#### **Case 5. 기억 수정 (Zone 3 Interaction)**

- **Goal:** AI가 잘못 알고 있는 내 정보를 고치고 싶음.
    
- **UX Flow:**
    
    1. **[Action]** 우측 패널(Zone 3)의 '직무 정보' 카드 클릭 → 수정 아이콘 클릭.
        
    2. **[Action]** "주니어 개발자"를 "시니어 개발자"로 수정 후 **[저장]** 클릭.
        
    3. **[Visual - Optimistic UI]** 저장 클릭 **즉시** 텍스트가 변경되고, 카드 구석에 작은 스피너가 0.5초 돌다 사라짐. (사용자 대기 시간 0초).
        
    4. **[Visual]** 하단에 "✅ 기억이 수정되었습니다" 토스트 메시지 출력.
        

#### **Case 6. 페르소나 유기적 전환 (Auto Switch)**

- **Goal:** 개발 얘기하다가 사업 얘기로 넘어가도 자연스럽게 대응하길 원함.
    
- **UX Flow:**
    
    1. **[Visual]** 현재 화면 테마는 Navy(개발자).
        
    2. **[Action]** "이거 유료화하면 돈 될까?" 입력.
        
    3. **[Visual]** 답변 생성 시작과 동시에, 상단 헤더 칩이 **[💼 비즈니스 모드]**로 바뀜.
        
    4. **[Visual]** 화면 전체의 포인트 컬러가 Blue → **Orange**로 부드럽게 전환됨(CSS Transition).
        

#### **Case 8. 페르소나 정교화 (Manual Edit) [NEW]**

- **Goal:** AI의 말투나 역할 설정을 더 디테일하게 바꾸고 싶음.
    
- **UX Flow:**
    
    1. **[Action]** 상단 헤더의 페르소나 칩 클릭 → 드롭다운에서 **[⚙️ 설정]** 클릭.
        
    2. **[Visual]** 화면 중앙에 **[페르소나 설정 모달]** 팝업.
        
    3. **[Action]** 어조(Tone) 값을 "친절한"에서 "냉철한 보안 전문가"로 수정 후 **[저장]** 클릭.
        
    4. **[Visual]** 모달이 닫히며 화면이 한 번 반짝임(Flash). 이후 AI가 기존 답변을 지우고, 매우 딱딱하고 전문적인 말투로 다시 답변을 씀.
        

---

### **Category D. 에러 상황 (Error Handling)**

#### **Case 7. 계획 검증 실패**

- **Goal:** 필수 단계를 빼먹었을 때 AI가 경고해 주길 원함.
    
- **UX Flow:**
    
    1. **[Action]** 사용자가 "데이터 수집" 단계를 삭제하고, "데이터 분석"만 남긴 채 **[▶️ 진행]** 클릭.
        
    2. **[Visual]** 계획 카드가 좌우로 덜덜 떨림(Shake Animation).
        
    3. **[Visual]** 카드 내부에 붉은색 **[⚠️ Alert Box]** 등장: _"데이터 수집 단계가 필요합니다."_
        
    4. **[Action]** Alert Box 안의 **[↺ 원래대로 복구]** 버튼 클릭하여 초기화.